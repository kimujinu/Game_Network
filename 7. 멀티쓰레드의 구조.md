# 7. 멀티쓰레드의 구조

<pre>
멀티쓰레드 구조의 핵심 : 어떻게 자원을 잘 분배를 해야 멀티쓰레드가 서로 다투지 않고 자원을 잘 사용할 수 있을까?
방법

1. 무식하게 한다.(좋지 않음) 
    -> 쓰레드의 Locking 때문에 성능이 저하
       대기시간이 길어진다.
       데드락이 발생할 수 있음.
 
2. Actor 기준으로 나눈다.(Akka 방식)
    -> Actor만의 고유의 자원을 가지고 있다.
    -> Locking을 할 필요없이 고유의 자원으로 나누어져 있으므로 Meassge로 다른 Acotr와 통신할 수 있다.(이상적인 시나리오)
    -> 현실적으론 상대 Actor의 자원을 조회하게 되면 상대 Actor는 나의 자원을 보호해야 하므로 Locking을 걸수 밖에없는 상황이 발생한다.
       Locking을 걸면 데드락이 발생할 확률이 높다.

3. 쓰레드를 시스템을 기준으로 나눈다. (Actor, System, ECS(Entitiy, Component, System))
    -> Entitiy(어떤 컴포넌트를 가지고 있는지 정의), Component(데이터), System(기능) 
    -> ECS 구조 
        -> 장점 : 쉬운 확장, 데이터 로컬리티가 좋아짐(데이터들이 한곳에 모여있는 것(데이터가 따로 있다면 성능 저하 발생))
        -> 단점 : 시스템과 컴포넌트의 관계가 1:N이 될 수 있고, 시스템과 시스템 사이에 인터랙션이 발생할 수 있다.
                  이렇게 되면 의존성과 복잡도가 올라가고 비동기로 처리해야 하므로 타이밍이슈가 발생할 수도 있다.

ref: https://youtu.be/ssEmdIX4jIw
</pre>
