# 3. Deterministic 방식
<pre>
이전 TCP/UDP와 같이 데이터의 전송을 알아보았다면, 

이번엔 어떤 데이터를 실어서 어떻게 활용(처리)할 것인지 알아볼 것이다.

크게 2가지로 나눈다.

Deterministic 방식, Server Authority 방식

Deterministic 방식은 UDP를 많이 사용하고, Server Authortiy 방식은 TCP를 많이 사용한다.

Deterministic은 반응성이 우수한 게임에 많이 활용되고, 

Server Authority 방식은 서버 권한이 필요한 경우에 많이 사용된다.

1. Deterministic 방식
-> 같은 입력이 들어가면 같은 시간에 결과를 출력하는 방식
   유저 1이 입력한 입력과 유저 2가 입력한 입력이 서로에게 똑같이 적용되면 양 컴퓨터의 게임의 상태가 같다.(싱크가 맞다)

-> 문제점 : 서로의 입력을 전송하는데 지연 시간이 걸림 (즉, 싱크가 안맞는 문제가 존재)
            중간 접속 처리가 어려움.
            
Determinstic 방식의 문제점을 해결하기 위한 대표적인 2가지 방법
-> Delay와 Rollback

Delay 방식 : 양쪽 유저들이 입력하였을때, 지연시간 만큼의 딜레이를 주어 싱크를 맞추는 방식
    장점 : 쉽고, 간편하게 구현이 가능
    단점 : 말 그대로 딜레이가 생김, 유저가 렉이라고 판단할만한 딜레이가 생김.

Rollback 방식: 상대방 입력이 들어왔을때, 뒤로 감기를 하여 그 입력을 집어넣고 다시 앞으로 감아 싱크를 맞추는 방식
    장점 : 공정한 상황 연출이 가능함, 반응성이 좋음, 격투게임, FPS게임에 적합
    단점 : 유저 입장에서 렉이라고 판단할 상황이 생김, 구현의 어려움, 싱크가 안맞을수 있는 가능성이 존재

이러한 장,단점때문에 보통 Delay와 Rollback방식을 섞어 사용하며, Rollback은 제한적으로 사용한다.

다른 유용한 방식
-> 중계서버(Relay Server)이용 방식 : 입력을 내가 처리하는 것이 아닌 서버로 전송한다. 그 서버는 모든 클라이언트에게 모두 전송하여 서버에 의존하는 방식
   -> 서버 동작 방식 : 시간을 일정간격으로 쪼개서, 그 시간동안 클라이언트들이 보낸 입력을 모아서 그 시간이 끝날때 클라이언트에게 전송한다.
        -> 장점 : AOS, 스포츠게임에 적합, 싱크가 잘맞음.
        -> 단점 : 딜레이가 길어지는 문제 존재. 반응성이 떨어짐

-> Rollback 사이클 이용 방식 : Rollback을 할때 구현이 복잡하므로, 매 프레임 정해진 사이클만큼 계속 롤백하여 싱크를 맞춰 처리하는 방식

ref : https://youtu.be/HZC70xFpW8Q, https://youtu.be/mW01alKV4fQ, https://youtu.be/ZryrwZJSRs4
</pre>
