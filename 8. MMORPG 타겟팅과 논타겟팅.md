# 8. MMORPG에서 타겟팅과 논타겟팅 게임의 서버입장

<pre>
MMORPG의 조작 방법을 나누면 크게 타겟팅, 논타겟팅 그리고 오토 타겟팅으로 나누어 진다.
개발적인 측면으로 보았을 때, 타겟팅보다 논타겟팅으로 개발을 진행하는 것이 어려운데 왜 그런지 알아보자.

타겟팅 MMORPG
-> 공격시 플레이어가 마우스 등의 컨트롤을 사용해서 공격대상을 지정하는 방식.
-> 공격 충돌판정, 데미지 계산등은 서버가 처리한다. 그렇지 않으면 핵이 나올 수 있기 때문에 모두 서버가 결정한다.
-> 진행 시나리오
    -> 1. 클라이언트 : 유저가 공격 대상을 지정하여 클릭(타겟팅)
    -> 2. 클라이언트 : 몬스터 XXX(몬스터 고유 번호)를 AA(공격 이름)로 공격" 메시지를 서버로 전송
    -> 3. 서버 : 클라이언트가 보내준 '공격대상'과 '공격방법'을 토대로 이 플레이어가 공격이 가능한지 판단(거리, 장애물, 해당 스킬 사용여부)
    -> 4. 서버 : 공격 가능하다면 데미지를 계산 적용하고 결과를 클라이언트에 전송
    -> 5. 클라이언트 : 서버로부터 받은 공격 결과에 따라 공격 액션 및 이펙트 표시
-> 타겟팅 게임은 유저간 클라이언트에 좌표가 조금 다르다 하여도 같은 결과를 유도할 수 있다.
    -> 장점 : 서버 부하를 줄일 수 있기 때문에 많은 MMO 게임들은 타겟팅 방식을 기본 방식으로 사용하였다.
    -> 단점 : 타겟을 지정하는 조작 방법으로 인하여 액션성이 떨어진다.
    
논타겟팅 MMORPG
-> 말 그대로 타겟을 정하지 않고 공격을 하는 방식이다. 특정 타겟을 지정하지 않고 공격행동을 하였을 때
   이 공격범위에 맞는 몬스터를 서버에서 검색, 판단하여 피해를 입히게 한다.
-> 장점 : 전투의 액션성과 조작감의 재미
-> 단점 : 서버가 다수의 몬스터를 대상으로 충돌 판단을 해야하므로 서버의 부하가 크다.
          -> 게임서버 안에는 수 천, 수 만명의 플레이어, 그리고 수 천마리의 몬스터 오브젝트가 살아 움직이고 있다.
             어떤 캐릭터가 칼을 휘둘렀을 때 이 공격에 맞는 몬스터를 찾아 검색하는 일은 쉬운일이 아니다.
             -> 이를 위해 맵을 작은 타일로 나누거나, 일정 단위의 섹터(클러스터)로 분할하여 충돌 검색의 범위를 줄이기 위한 벙법들을 사용한다.
          서버와 클라이언트간의 동기화가 맞지 않다면 판정에 불만이 생길수 있다.
          -> 타겟팅 방법의 경우 좌표가 조금씩 어긋나 있더라도 같은 공격의 결과를 유도할 수 있다.
             하지만, 논타겟팅은 서버에서 공격 타겟을 지정하기 때문에 공격자의 클라이언트에서 보는 캐릭터의 좌표와 서버의 캐릭터 좌표가 다르다면
                     전혀 엉뚱한 공격 결과가 나타나게 된다.
          우글우글한 MMO에서 원하는 타겟에 대한 공격이 어렵다.

ref: http://post.procademy.co.kr/archives/510
</pre>
